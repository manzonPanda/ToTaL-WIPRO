<!DOCTYPE html>
<html>
<head>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
 <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js"></script>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
   <link rel="stylesheet" data-id="3" type="text/css" href="https://cdn.datatables.net/v/bs4/jqc-1.12.4/jszip-2.5.0/dt-1.10.20/b-1.6.1/b-colvis-1.6.1/b-flash-1.6.1/b-html5-1.6.1/b-print-1.6.1/cr-1.5.2/fh-3.1.6/r-2.2.3/rr-1.2.6/sl-1.3.1/datatables.min.css"/> 
<script type="text/javascript" data-id="6" src="https://cdn.datatables.net/v/bs4/jqc-1.12.4/jszip-2.5.0/dt-1.10.20/b-1.6.1/b-colvis-1.6.1/b-flash-1.6.1/b-html5-1.6.1/b-print-1.6.1/cr-1.5.2/fh-3.1.6/r-2.2.3/rr-1.2.6/sl-1.3.1/datatables.min.js"></script>
 
 <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.26.0/moment.min.js"></script>
<style>
progress[value]  {
  -webkit-appearance: none;
     -moz-appearance: none;
          appearance: none;

  height: 30px;
  width: 100%;
  color: green; 
   border-radius: 9px;
   content: attr('80%');
}
.progress{
	height:15px;
	font-size:1.2rem;
	font-weight: bold
}
.progress-bar{
	color:black
}

.progress-bar-tenPercent{
	background-color: #FF0000
}
.progress-bar-twentyPercent{
	background-color:#FF3400
}
.progress-bar-thirtyPercent{
	background-color:#FF6900
}
.progress-bar-fourtyPercent{
	background-color:#FF8C00
}
.progress-bar-fiftyPercent{
	background-color:#FFC100 
}
.progress-bar-sixtyPercent{
	background-color:#FFE400 
}
.progress-bar-seventyPercent{
	background-color: #FFF600 
}
.progress-bar-eightyPercent{
	background-color:#C2FF00
}
.progress-bar-ninetyPercent{
	background-color:#8DFF00 
}
.progress-bar-hundredPercent{
	background-color:#58FF00 
}
.progress-bar-fullPercent{
	background-color:green;
	color:white
}
</style>
</head>
<body>
<!--https://www.mathsisfun.com/combinatorics/combinations-permutations-calculator.html  Combinations and Permutations Calculator  -->
<!--https://delim.co/#   link to Comma Separating Tool-->
<div class="container">	
	<div class="row">
		<h5 style="font-weight:bold;">Total Combination with Required URL Parameter: 
			<span id="totalCount">0</span>/<span id="listCount">0</span>
		</h5>
		<div class="container" >
			<progress style="display:none" max="100" value="0" id="myBar" data-label="50%"></progress>
			<div class="progress">
				<div id="myBar2" class="progress-bar progress-bar-striped progress-bar-animated" style="width:0%">
					 
				</div>
			</div>
			<div class="row" style="display:none" id="progressBarDiv">
				<div class="col-sm">
					<div id="fakeProgress" style="display:block">
						<span class="badge badge-pill" style="color:white"> <span id="emailsCountStartDisplay" class="badge badge-light" style="color:white">0</span></span><progress></progress><span class="badge badge-pill" style="color:white"> <span id="emailsCountDisplay" class="badge badge-light" style="color:white">0</span> Emails</span>
					</div>
				</div>
				
				<div class="col-sm">
					<span class="badge badge-pill badge-danger" style="width:100%;display:block" id="resultOfManipulation"> ???</span>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-sm">
			<input type="file" id="file">
			<!-- <button onclick="clickButton()">Calculate</button> -->
			<!-- <button onclick="combination('a')">Calculate</button> -->
			<button onclick="fastUpdate('a')">Calculate</button>
		</div>
		<div class="col-sm">
			<textarea style="width:450px;height: 50px" id="myTextArea"></textarea>
			<!-- <button onclick="combination('b')">Calculate</button> -->
			<button onclick="fastUpdate('b')">Calculate</button>
		</div>
		
	</div>
</div> 
 <hr>
  
<div class="container" id="result" >
	<div class="row">
		<div class="col-sm">
			<table class="table table-sm table-bordered" id="testCases">
				<thead class="thead-light">
					<th class="text-center" style="width:8%;color:black;">TC</th>
					<th class="text-center" style="width:60%;color:black;">URL</th>
					<th class="text-center" style="color:black;">Fvp Descr</th>
				</thead>
				<tbody id="testCasesTbody" >
				<tbody>
			</table>
		</div>
	</div>
</div>


  
</body>
</html>

<script>
var input = document.getElementById("file");
var output = document.getElementById("output");

var filelist = [];
input.addEventListener("change", function () {
  if (this.files && this.files[0]) {
    var myFile = this.files[0];
    var reader = new FileReader();
    
	reader.onload = function (progressEvent) {
		// Entire file
		//console.log(this.result);
		// By lines
		var lines = this.result.split('\n');
		
		for (var line = 0; line < lines.length; line++) {
			filelist.push(lines[line]);
		}
		document.getElementById("listCount").innerHTML = filelist.length;
	};
    <!-- reader.readAsText(file); -->
	
	
    <!-- reader.addEventListener('load', function (e) { -->
      <!-- output.textContent = e.target.result; -->
    <!-- }); -->
    reader.readAsBinaryString(myFile);
  }   
});
$(document).ready(function() {
			var t1 = $('#testCases').DataTable({
				destroy: true,
				 dom: 'Bfrtip',
				 "paging": false,
				 "scrollY": "600px",
				 "scrollCollapse": true,
				 "order": [[ 0, "asc" ]],
				buttons: [
					{
						extend: 'copyHtml5',
						exportOptions: {
							columns: [ 0, ':visible' ]
						}
					},
					{
						title: 'ToTaL_fvps',
						extend: 'excelHtml5',
						exportOptions: {
							columns: [ 0, 1, 2],
							rows: ':not(.label-warning)', 
						}
					},
					'colvis'
				],
				 responsive: true,				 
			});	


} );

//required
var groupByCount = 0
var  areaCount = 0
var  perspectiveCount = 0
var  timeCount = 0
var customDateCount = 0
//not required
var filterFacilityCount=0
var filterTechnologyCount=0
var filterSBECount=0
var filterDeviceCount=0
var filterLotCount=0
var filterColumnCount=0
var total = 0;

function reset(){
//required
groupByCount = 0
areaCount = 0
perspectiveCount = 0
timeCount = 0
customDateCount = 0
//not required
filterFacilityCount=0
filterTechnologyCount=0
filterSBECount=0
filterDeviceCount=0
filterLotCount=0
filterColumnCount=0

}
/*var myDiv = document.getElementById("innerDiv")
var myDiv2 = document.getElementById("innerDiv2")
for(var i = 0;i < 400000;i++){
    let ii = i;
    setTimeout(function(){
        //console.log(ii);
		myDiv.innerHTML = ii
    },1000);
}*/
function fastUpdate(button){
	var momentStart = moment().format()

	var d = new Date();
	var startMinutes = d.getMinutes()
	var startSeconds = d.getSeconds()
	var list
	if(button == "a"){
		list = filelist
	}else if(button == "b"){
		list = document.getElementById("myTextArea").value.replace(/\r\n/g,"\n").split("\n")
		document.getElementById("listCount").innerHTML = list.length;
	}

	document.getElementById("myBar").setAttribute("max",list.length);
	document.getElementById("myBar2").setAttribute("class","progress-bar bg-danger progress-bar-striped progress-bar-animated")
	for(var i = 0;i <= list.length;i++){
		let ii = i;
		setTimeout(function(){
			//console.log(list[ii])
			var elem = document.getElementById("myBar");
			var elem2 = document.getElementById("myBar2");
			//when finished
			if( ii == list.length ){ 
				//document.getElementById("myBar").style.display = "none";
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-fullPercent progress-bar-striped progress-bar-animated")
				document.getElementById("myBar2").innerHTML = "100% COMPLETE";
				elem2.setAttribute("style","width:"+parseInt( (ii/list.length)*100)+"%");
				elem2.setAttribute("style","width:100%");
				document.getElementById("totalCount").parentNode.setAttribute("style","font-weight:bold;color: green")
				//solve time
				var momentEnd = moment().format() 
				document.getElementById("totalCount").parentNode.innerHTML = "Total Combination with Required URL Parameter: "+total+"/"+list.length+" ("+moment(momentEnd).diff(moment(momentStart), 'minutes')+"mins "+moment(momentEnd).diff(moment(momentStart), 'seconds')+"secs "+d.getMilliseconds()+"ms)"
				
				return;
			}

			elem.value = ii;
			elem2.setAttribute("style","width:"+parseInt( (ii/list.length)*100)+"%");
			elem2.innerHTML = parseInt( (ii/list.length)*100)+"%";
			document.getElementById("emailsCountStartDisplay").textContent = ii;
			
			if( (ii/list.length)*100 < 10 ){
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-tenPercent progress-bar-striped progress-bar-animated")
			}else if( (ii/list.length)*100 > 10 && (ii/list.length)*100 < 20 ){
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-twentyPercent progress-bar-striped progress-bar-animated")			
			}else if( (ii/list.length)*100 > 20 && (ii/list.length)*100 < 30 ){
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-thirtyPercent progress-bar-striped progress-bar-animated")			
			}else if( (ii/list.length)*100 > 30 && (ii/list.length)*100 < 40 ){
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-fourtyPercent progress-bar-striped progress-bar-animated")			
			}else if( (ii/list.length)*100 > 40 && (ii/list.length)*100 < 50 ){
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-fiftyPercent progress-bar-striped progress-bar-animated")						
			}else if( (ii/list.length)*100 > 50 && (ii/list.length)*100 < 60 ) {
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-sixtyPercent progress-bar-striped progress-bar-animated")						
			}else if( (ii/list.length)*100 > 60 && (ii/list.length)*100 < 70 ) {
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-seventyPercent progress-bar-striped progress-bar-animated")						
			}else if( (ii/list.length)*100 > 70 && (ii/list.length)*100 < 80 ) {
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-eightyPercent progress-bar-striped progress-bar-animated")						
			}else if( (ii/list.length)*100 > 80 && (ii/list.length)*100 < 90 ) {
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-ninetyPercent progress-bar-striped progress-bar-animated")						
			}else if( (ii/list.length)*100 > 90 && (ii/list.length)*100 < 100 ) {
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-hundredPercent progress-bar-striped progress-bar-animated")						
			}
			////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			reset()
			var urlList = list[ii].split(",")
			var nonRequiredValid = false
			for( var j=0; j < urlList.length; j++ ){
				if(urlList[j].split("=")[0] == "groupBy"){
					groupByCount++;
				}else if(urlList[j].split("=")[0] == "area"){
					areaCount++
				}else if(urlList[j].split("=")[0] == "perspective"){
					perspectiveCount++
				}else if(urlList[j].split("=")[0] == "local"){
					timeCount++
				}else if(urlList[j].split("=")[0] == "tranDate"){
					customDateCount++
				}
				//non required
				if( urlList[j].split("=")[0]=="fabLocation" || urlList[j].split("=")[0]=="fabFacility" || urlList[j].split("=")[0]=="probeLocation" || urlList[j].split("=")[0]=="probeFacility" ){
					filterFacilityCount++
					//(filterFacilityCount>1) ? break:""
				}
				if( urlList[j].split("=")[0]=="prtech" || urlList[j].split("=")[0]=="tech" || urlList[j].split("=")[0]=="ctech" ){
					filterTechnologyCount++
					//(filterTechnologyCount==1) ? nonRequiredValid=true:""
				}
				if( urlList[j].split("=")[0]=="sbe" || urlList[j].split("=")[0]=="sbe1" || urlList[j].split("=")[0]=="sbe2" ){
					filterSBECount++
					//(filterSBECount>1) ? nonRequiredValid=true:""
				}
				if( urlList[j].split("=")[0]=="device" || urlList[j].split("=")[0]=="material" || urlList[j].split("=")[0]=="chipname" ){
					filterDeviceCount++
					//(filterDeviceCount>1) ? nonRequiredValid=true:""
				}
				if( urlList[j].split("=")[0]=="fablot" || urlList[j].split("=")[0]=="lot" ){
					filterLotCount++
					//(filterLotCount>1) ? nonRequiredValid=true:""
				}
				if( urlList[j].split("=")[0]=="columns" ){
					filterColumnCount++
					//(filterColumnCount>1) ? nonRequiredValid=true:""
				}
			}
			//required
			if( (groupByCount==1 && areaCount==1 && perspectiveCount==1 && timeCount==1 && customDateCount==1) ){
				total++;
				//var table = document.getElementById("testCasesTbody");
				//var row = table.insertRow(-1);
				//row.insertCell(0).innerHTML = "ToTaL_TC_"+total
				//row.insertCell(1).innerHTML = "<span style='display:none'>"+list[ii]+"</span>http://total.itg.ti.com/ToTaL/?"+checkEscapeCode(list[ii])
				//row.insertCell(2).innerHTML = "<button onclick='copyFvpDescription(this)' class='btn btn-info' type='button'>copy</button>"
				var combinationSplit = list[ii].split(",")
																		//combinationSplit[4].split("=")[1]
				var description = "Verify if "+combinationSplit[0].split("=")[0]+" parameter is set to "+combinationSplit[0].substring(combinationSplit[0].indexOf("=")+1)+", "
				+combinationSplit[1].split("=")[0]+" parameter is set to " + combinationSplit[1].substring(combinationSplit[1].indexOf("=")+1)+", "
				+combinationSplit[2].split("=")[0]+" parameter is set to " + combinationSplit[2].substring(combinationSplit[2].indexOf("=")+1)+", "
				+combinationSplit[3].split("=")[0]+" parameter is set to " + combinationSplit[3].substring(combinationSplit[3].indexOf("=")+1)+", "
				+combinationSplit[4].split("=")[0]+" parameter is set to " + combinationSplit[4].substring(combinationSplit[4].indexOf("=")+1)+","
				+" then API will return a tabular data based on the filter values applied."
				//row.insertCell(2).innerHTML = description
				/////////////////////////////////////////////////////////////////////	
				var t1 = $('#testCases').DataTable();
				t1.row.add( [
						total,
						"http://total.itg.ti.com/ToTaL/?"+checkEscapeCode(list[ii]),
						//getParameterNameOnly(list[ii]),
						//description,
						"required parameter description"
					] ).draw( false ).node();
					
				//progress bar
				elem.value = ii;
				elem2.setAttribute("style","width:"+parseInt( (ii/list.length)*100)+"%");
				elem2.innerHTML = parseInt( (ii/list.length)*100)+"%";
				document.getElementById("emailsCountStartDisplay").textContent = ii;
			}
			//non required	
			// nonRequiredValid==true
			//(filterFacilityCount==1 || filterTechnologyCount==1 || filterSBECount==1 || filterDeviceCount==1 || filterLotCount==1 || filterColumnCount==1)
			if( (filterFacilityCount==1 || filterTechnologyCount==1 || filterSBECount==1 || filterDeviceCount==1 || filterLotCount==1 || filterColumnCount==1) &&
				(filterFacilityCount<=1 && filterTechnologyCount<=1 && filterSBECount<=1 && filterDeviceCount<=1 && filterLotCount<=1 && filterColumnCount<=1) ){
				total++;
				var combinationSplit = list[ii].split(",")
				var description = "non-required parameter description"
				/////////////////////////////////////////////////////////////////////	
				var t1 = $('#testCases').DataTable();
				t1.row.add( [
						total,
						//"http://total.itg.ti.com/ToTaL/?"+checkEscapeCode(list[ii]),
						getParameterNameOnly(list[ii]),
						description,
					] ).draw( false ).node();
					
				//progress bar
				elem.value = ii;
				elem2.setAttribute("style","width:"+parseInt( (ii/list.length)*100)+"%");
				elem2.innerHTML = parseInt( (ii/list.length)*100)+"%";
				document.getElementById("emailsCountStartDisplay").textContent = ii;
				
			}
			if (ii <= list.length) {
				elem.value = ii;
				elem2.setAttribute("style","width:"+parseInt( (ii/list.length)*100)+"%");
				elem2.innerHTML = parseInt( (ii/list.length)*100)+"%";   
				document.getElementById("totalCount").innerHTML = ii                
			 }
			
		},1000);
	}
	
}
function getParameterNameOnly(combinationList){
var parameterValueList = combinationList.split(",")
	var url = ""
	for(var i=0; i<parameterValueList.length; i++){
		var parameterValueSplit = parameterValueList[i].split("=")
		var parameterName =""
		if( parameterValueSplit.length > 2 ){
			parameterName = parameterValueSplit[0]
		}else{
			parameterName = parameterValueSplit[0]
		}
		url += parameterName+"+"
	}
return url
}

									 //&local=dal,las
//groupBy=FAC,area=TEST,perspective=Fab,local=dal=las,tranDate=MT D
function checkEscapeCode(combinationList){
	var parameterValueList = combinationList.split(",")
	var url = ""
	for(var i=0; i<parameterValueList.length; i++){
		var parameterValueSplit = parameterValueList[i].split("=")
		var parameterName =""
		var valueOfParameter =""
		if( parameterValueSplit.length > 2 ){
			//url += "&"+parameterValueList[i].split("=")[0]+"="+escapedCode(parameterValueList[i].substring(parameterValueList[i].indexOf("=")+1)) 
			parameterName = parameterValueSplit[0]
			valueOfParameter = parameterValueList[i].substring(parameterValueList[i].indexOf("=")+1)
		}else{
			//url += "&"+parameterValueList[i].split("=")[0]+"="+escapedCode(parameterValueList[i].split("=")[1])
			parameterName = parameterValueSplit[0]
			valueOfParameter = parameterValueSplit[1]
		}
		
		//escapedCode()
		valueOfParameter = valueOfParameter.split("%").join("%25")
		valueOfParameter = valueOfParameter.split(" ").join("%20")
		valueOfParameter = valueOfParameter.split("<").join("%3C")
		valueOfParameter = valueOfParameter.split(">").join("%3E")
		valueOfParameter = valueOfParameter.split("#").join("%23")
		valueOfParameter = valueOfParameter.split("{").join("%7B")
		valueOfParameter = valueOfParameter.split("}").join("%7D")
		valueOfParameter = valueOfParameter.split("|").join("%7C")
		valueOfParameter = valueOfParameter.split("\\").join("%5C")
		valueOfParameter = valueOfParameter.split("^").join("%5E")///
		valueOfParameter = valueOfParameter.split("~").join("%7E")
		valueOfParameter = valueOfParameter.split("[").join("%5B")
		valueOfParameter = valueOfParameter.split("]").join("%5D")
		valueOfParameter = valueOfParameter.split("'").join("%60")
		valueOfParameter = valueOfParameter.split(";").join("%3B")
		valueOfParameter = valueOfParameter.split("/").join("%2F")
		valueOfParameter = valueOfParameter.split("?").join("%3F")
		valueOfParameter = valueOfParameter.split(":").join("%3A")
		valueOfParameter = valueOfParameter.split("@").join("%40")
		valueOfParameter = valueOfParameter.split("=").join("%3D")
		valueOfParameter = valueOfParameter.split("&").join("%26")
		valueOfParameter = valueOfParameter.split("$").join("%24")
		url += "&"+parameterName+"="+valueOfParameter
	}
	return url
}

function copyFvpDescription(row){
	var combinationSplit = row.parentNode.previousSibling.children[0].innerHTML.split(",")
/*	Verify if groupBy parameter is set to FAC,
	area parameter is set to ASSY,
	perspective parameter is set to FAB,
	time parameter is set to 0,
	tranDate parameter is set to startDate-endDate
	then API will return a tabular data based on the filter values applied.*/
	var row = "Verify if "+combinationSplit[0].split("=")[0]+" parameter is set to "+combinationSplit[0].split("=")[1]+", "
		+combinationSplit[1].split("=")[0]+" parameter is set to " + combinationSplit[1].split("=")[1]+", "
		+combinationSplit[2].split("=")[0]+" parameter is set to " + combinationSplit[2].split("=")[1]+", "
		+combinationSplit[3].split("=")[0]+" parameter is set to " + combinationSplit[3].split("=")[1]+", "
		+combinationSplit[4].split("=")[0]+" parameter is set to " + combinationSplit[4].split("=")[1]+","
		+" then API will return a tabular data based on the filter values applied."
	  const el = document.createElement('textarea');
	  el.value = row;
	  document.body.appendChild(el);
	  el.select();
	  document.execCommand('copy');
	  document.body.removeChild(el);
	
}




function clickButton(){
	console.log(list.length)
	//document.getElementById("result").innerHTML += list[2]
	for(var i=0; i <list.length; i++){
		reset()
		var urlList = list[i].split(",")
		
		for( var j=0; j < urlList.length; j++ ){
			if(urlList[j].split("=")[0] == "groupBy"){
				groupByCount++;
			}else if(urlList[j].split("=")[0] == "area"){
				areaCount++
			}else if(urlList[j].split("=")[0] == "perspective"){
				perspectiveCount++
			}else if(urlList[j].split("=")[0] == "time"){
				timeCount++
			}else if(urlList[j].split("=")[0] == "customDate"){
				customDateCount++
			}else if(urlList[j].split("=")[0] == "fabLocation"){
				filterFacility++
			}else if(urlList[j].split("=")[0] == "fabFacility"){
				filterFacility++
			}else if(urlList[j].split("=")[0] == "probeLocation"){
				filterFacility++
			}else if(urlList[j].split("=")[0] == "probeFacility"){
				filterFacility++
			}else if(urlList[j].split("=")[0] == "prtech"){
				filterTechnology++
			}else if(urlList[j].split("=")[0] == "tech"){
				filterTechnology++
			}else if(urlList[j].split("=")[0] == "ctech"){
				filterTechnology++
			}else if(urlList[j].split("=")[0] == "sbe"){
				filterSBE++
			}else if(urlList[j].split("=")[0] == "sbe1"){
				filterSBE++
			}else if(urlList[j].split("=")[0] == "sbe2"){
				filterSBE++
			}else if(urlList[j].split("=")[0] == "device"){
				filterDevice++
			}else if(urlList[j].split("=")[0] == "material"){
				filterDevice++
			}else if(urlList[j].split("=")[0] == "chipname"){
				filterDevice++
			}else if(urlList[j].split("=")[0] == "fablot"){
				filterLot++
			}else if(urlList[j].split("=")[0] == "lot"){
				filterLot++
			}
		}
		if(groupByCount==1 && areaCount==1 && perspectiveCount==1 && timeCount==1 && customDateCount==1){
			document.getElementById("result").innerHTML += list[i]+"<br>"
			total++;
		}	
	}
	document.getElementById("totalCount").innerHTML = total
	document.getElementById("totalCount").parentNode.setAttribute("style","font-weight:bold;color: green")

}

//combination()
var barCounter = 0
function combination(button){
	if(button == "a"){
		var combinationList = list
	}else if(button == "b"){
		var combinationList = document.getElementById("myTextArea").value.replace(/\r\n/g,"\n").split("\n")
	}
	document.getElementById("myBar").setAttribute("max",combinationList.length);
	document.getElementById("myBar2").setAttribute("class","progress-bar bg-danger progress-bar-striped progress-bar-animated")
	myLoop(combinationList.length,combinationList)
//var combinationList = document.getElementById("myTextArea").value
//document.getElementById("result").innerHTML += combinationList[0].split(",")[0]

/*for(var i=0; i <combinationList.length; i++){
	reset()
	var urlList = combinationList[i].split(",")
	
	for( var j=0; j < urlList.length; j++ ){
		if(urlList[j].split("=")[0] == "groupBy"){
			groupByCount++;
		}else if(urlList[j].split("=")[0] == "area"){
			areaCount++
		}else if(urlList[j].split("=")[0] == "perspective"){
			perspectiveCount++
		}else if(urlList[j].split("=")[0] == "time"){
			timeCount++
		}else if(urlList[j].split("=")[0] == "customDate"){
			customDateCount++
		}
	}
	if(groupByCount==1 && areaCount==1 && perspectiveCount==1 && timeCount==1 && customDateCount==1){
		document.getElementById("result").innerHTML += "http://total.itg.ti.com/ToTaL/?"+checkEscapeCode(combinationList[i])+"<br>"
		//document.getElementById("result").innerHTML += combinationList[i]+"<br>"
		total++;
	}
} 
document.getElementById("totalCount").innerHTML = total
document.getElementById("totalCount").parentNode.setAttribute("style","font-weight:bold;color: green")
*/
}
function myLoop(combinationCount,combinationList){
	try{
		setTimeout(function () {
			var elem = document.getElementById("myBar");
			var elem2 = document.getElementById("myBar2");
			if( barCounter == combinationCount ){ 
				console.log("100% complete.")
				//document.getElementById("myBar").style.display = "none";
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-fullPercent progress-bar-striped progress-bar-animated")
				document.getElementById("myBar2").innerHTML = "100% COMPLETE";
				elem2.setAttribute("style","width:"+parseInt( (barCounter/combinationCount)*100)+"%");
				elem2.setAttribute("style","width:100%");
				
				document.getElementById("totalCount").parentNode.setAttribute("style","font-weight:bold;color: green")
				return;
			}
			//////////////////////////////////
			elem.value = barCounter;
			elem2.setAttribute("style","width:"+parseInt( (barCounter/combinationCount)*100)+"%");
			console.log( parseInt( (barCounter/combinationCount)*100 ))
			elem2.innerHTML = parseInt( (barCounter/combinationCount)*100)+"%";
			document.getElementById("emailsCountStartDisplay").textContent = barCounter;
			
			if( (barCounter/combinationCount)*100 < 10 ){
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-tenPercent progress-bar-striped progress-bar-animated")
			}else if( (barCounter/combinationCount)*100 > 10 && (barCounter/combinationCount)*100 < 20 ){
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-twentyPercent progress-bar-striped progress-bar-animated")			
			}else if( (barCounter/combinationCount)*100 > 20 && (barCounter/combinationCount)*100 < 30 ){
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-thirtyPercent progress-bar-striped progress-bar-animated")			
			}else if( (barCounter/combinationCount)*100 > 30 && (barCounter/combinationCount)*100 < 40 ){
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-fourtyPercent progress-bar-striped progress-bar-animated")			
			}else if( (barCounter/combinationCount)*100 > 40 && (barCounter/combinationCount)*100 < 50 ){
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-fiftyPercent progress-bar-striped progress-bar-animated")						
			}else if( (barCounter/combinationCount)*100 > 50 && (barCounter/combinationCount)*100 < 60 ) {
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-sixtyPercent progress-bar-striped progress-bar-animated")						
			}else if( (barCounter/combinationCount)*100 > 60 && (barCounter/combinationCount)*100 < 70 ) {
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-seventyPercent progress-bar-striped progress-bar-animated")						
			}else if( (barCounter/combinationCount)*100 > 70 && (barCounter/combinationCount)*100 < 80 ) {
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-eightyPercent progress-bar-striped progress-bar-animated")						
			}else if( (barCounter/combinationCount)*100 > 80 && (barCounter/combinationCount)*100 < 90 ) {
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-ninetyPercent progress-bar-striped progress-bar-animated")						
			}else if( (barCounter/combinationCount)*100 > 90 && (barCounter/combinationCount)*100 < 100 ) {
				document.getElementById("myBar2").setAttribute("class","progress-bar progress-bar-hundredPercent progress-bar-striped progress-bar-animated")						
			}
			////////////////////////////////////////////////////////////////////////////////////////////////////////////////
			reset()
			var urlList = combinationList[barCounter].split(",")
			for( var j=0; j < urlList.length; j++ ){
				if(urlList[j].split("=")[0] == "groupBy"){
					groupByCount++;
				}else if(urlList[j].split("=")[0] == "area"){
					areaCount++
				}else if(urlList[j].split("=")[0] == "perspective"){
					perspectiveCount++
				}else if(urlList[j].split("=")[0] == "time"){
					timeCount++
				}else if(urlList[j].split("=")[0] == "customDate"){
					customDateCount++
				}
			}
			if(groupByCount==1 && areaCount==1 && perspectiveCount==1 && timeCount==1 && customDateCount==1){
				document.getElementById("result").innerHTML += "http://total.itg.ti.com/ToTaL/?"+checkEscapeCode(combinationList[barCounter])+"<br>"
				total++;
				//progress bar
				elem.value = barCounter;
				elem2.setAttribute("style","width:"+parseInt( (barCounter/combinationCount)*100)+"%");
				elem2.innerHTML = parseInt( (barCounter/combinationCount)*100)+"%";
				document.getElementById("emailsCountStartDisplay").textContent = barCounter;
				document.getElementById("totalCount").innerHTML = total
			}
			
			if (barCounter <= combinationCount) {
				elem.value = barCounter;
				elem2.setAttribute("style","width:"+parseInt( (barCounter/combinationCount)*100)+"%");
				elem2.innerHTML = parseInt( (barCounter/combinationCount)*100)+"%";
				myLoop(combinationList.length,combinationList)
				//document.getElementById("emailsCountStartDisplay").textContent = barCounter;
			  barCounter++;                    
			 }
			
		}, 1)
			   
	}catch(error){
		alert(error)
	}
}


/*
var groupBy = ["groupBy=FAC",
"groupBy=LOC",
"groupBy=PRTECH",
"groupBy=TECH",
"groupBy=CTECH",
"groupBy=SBE",
"groupBy=SBE_1",
"groupBy=SBE_2",
"groupBy=MATERIAL",
"groupBy=DEVICE",
"groupBy=CHIP",
"groupBy=FABLOT",
"groupBy=LOT",]

var area = ["area=TEST",
"area=ASSY",
"area=SORT",
"area=FAB"]

var perspective = ["perspective=Fab",
"perspective=AT"]

var time = ["time=dallas",
"time=local"]

var tranDate = ["customDate=2020/04/01-2020/05/19",
"customDate=L90D",
"customDate=L30D",
"customDate=LM",
"customDate=LQ",
"customDate=MTD",
"customDate=QTD",
"customDate=YTD"]
*/





























</script>














